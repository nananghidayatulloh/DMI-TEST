<!DOCTYPE html>
<html lang="en">
	<head>
		<link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
		<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1"/>
	</head>
<body>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			
		</div>
	</nav>
	<div class="col-md-3"></div>
	<div class="col-md-6 well">
		<h3 class="text-primary" style="text-align:center;">Test DMI Currency Exchange</h3>
		<hr style="border-top:1px dotted #ccc;">
		<div class="col-md-2"></div>
		<div class="col-md-8">
		
		
		<div class="form-group">
				<label>Currency</label>
				<input type="number" class="form-control" id="valuecurrent"/>
			</div>
			<div class="form-group">
			
				<select class="form-control" id="dropdown1" style="width:100%;">			
				</select>
			</div>
			
			
			
			
			
			<div class="form-group">
				<label>Indonesia Rupiah</label>
				<input type="number" class="form-control" id="valueindonesia"/>
			</div>
		</div>
	</div>
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

var valuecurrent = document.getElementById("valuecurrent").value;
var currency = document.getElementById("dropdown1").value;
const host = 'api.frankfurter.app';
fetch(`https://${host}/currencies`)
  .then(resp => resp.json())
  .then((data) => {
    //console.log(data);
	//var count = Object.keys(data).length;
  //.log(count);
   if (data != '') 
        {
            $.each(data,function(key, value){
			if(key!='IDR'){
             $('#dropdown1').append('<option value=' + key + '>' + value + '</option>');
			 //console.log(key)
			 }
            });
			
         }
  
  });
  

  
 document.getElementById('dropdown1').addEventListener('change', function() {
 var valuecurrent = document.getElementById("valuecurrent").value;
 var currency = document.getElementById("dropdown1").value;

  fetch(`https://${host}/latest?amount=${valuecurrent}&from=${currency}&to=IDR`)
  .then(resp => resp.json())
  .then((data) => {
    //alert(`${data.rates.IDR}`);
	 //console.log(`${data.rates.IDR}`);
	var x1 = `${data.rates.IDR}`;
	document.getElementById("valueindonesia").value = x1;
	//$("#valueindonesia").val('${data.rates.IDR}');
  });
  
});
  
</script>
</html>